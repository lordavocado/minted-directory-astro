---
import { getCollection } from "astro:content";
import Wide from "@layouts/Wide.astro";
import ToolPage from "@layouts/ToolPage.astro";
import { render } from "astro:content";
import Sidebar from "@layouts/Sidebar.astro";
import Landing from "@layouts/Landing.astro";
import { getRootPages } from "@lib/getRootPages";

// Fetch all listings and pages
const { slug } = Astro.params;
const { entry } = Astro.props;

const { Content } = await render(entry);

export async function getStaticPaths() {
  return await getRootPages();
}

const landingView = !slug || slug === "blog";
const isDirectoryItem = entry.collection === "directory";
---

{
  landingView ? (
    <Landing>
      <Content />
    </Landing>
  ) : isDirectoryItem ? (
    <ToolPage frontmatter={entry.data} slug={slug}>
      <Content />
    </ToolPage>
  ) : (
    <Landing>
      <Content />
    </Landing>
  )
}